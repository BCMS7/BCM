var sprc = atob('Ly8gQVVUT1JFTE9HIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhpcyBjb2RlIGFsbG93cyB5b3UgdG8gYXV0b3JlbG9nIGFmdGVyIGEgZGlzY29ubmVjdGlvbi4gCgovLyBZb3UgbmVlZCB0byB1bmNvbW1lbnQgdGhlIGZvbGxvd2luZyBsaW5lcyBhbmQgd3JpdGUgdGhlIHJlcXVpcmVkIGluZm9ybWF0aW9uLgpCT1RBY2NvdW50RGljdCA9IHt9CkJPVEFjY291bnREaWN0WzExNjg2M10gPSB7fQpCT1RBY2NvdW50RGljdFsxMTY4NjNdLkFjY291bnROYW1lID0gIlNTUzc3NyIKQk9UQWNjb3VudERpY3RbMTE2ODYzXS5QYXNzd29yZCA9ICJTIgoKClNlcnZlclNvY2tldC5vbigiY29ubmVjdCIsIFNlcnZlckNvbm5lY3QpOyAvL1NlcnZlckNvbm5lY3QgbW9kaWZpZWQgYmVsb3cgZm9yIGF1dG8tcmVsb2cKCmZ1bmN0aW9uIFNlcnZlckNvbm5lY3QoKSB7CglTZXJ2ZXJTZXRDb25uZWN0ZWQodHJ1ZSk7CglTZXJ2ZXJTZW5kKCJBY2NvdW50TG9naW4iLCB7IEFjY291bnROYW1lOiBCT1RBY2NvdW50RGljdFtQbGF5ZXIuTWVtYmVyTnVtYmVyXS5BY2NvdW50TmFtZSwgUGFzc3dvcmQ6IEJPVEFjY291bnREaWN0W1BsYXllci5NZW1iZXJOdW1iZXJdLlBhc3N3b3JkIH0pOwp9CgoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKU2VydmVyU29ja2V0Lm9uKCJDaGF0Um9vbU1lc3NhZ2UiLCBmdW5jdGlvbiAoZGF0YSkgeyBDaGF0Um9vbU1lc3NhZ2VBZGQoZGF0YSk7IH0pOwoKaWYgKHR5cGVvZiBDaGF0Um9vbU1lc3NhZ2VBZGRpdGlvbkRpY3QgPT09ICd1bmRlZmluZWQnKSB7CiAgQ2hhdFJvb21NZXNzYWdlQWRkaXRpb25EaWN0ID0ge30KfQoKZnVuY3Rpb24gQ2hhdFJvb21NZXNzYWdlQWRkKGRhdGEpIHsKCgkvLyBNYWtlIHN1cmUgdGhlIG1lc3NhZ2UgaXMgdmFsaWQgKG5lZWRzIGEgU2VuZGVyIGFuZCBDb250ZW50KQoJaWYgKChkYXRhICE9IG51bGwpICYmICh0eXBlb2YgZGF0YSA9PT0gIm9iamVjdCIpICYmIChkYXRhLkNvbnRlbnQgIT0gbnVsbCkgJiYgKHR5cGVvZiBkYXRhLkNvbnRlbnQgPT09ICJzdHJpbmciKSAmJiAoZGF0YS5Db250ZW50ICE9ICIiKSAmJiAoZGF0YS5TZW5kZXIgIT0gbnVsbCkgJiYgKHR5cGVvZiBkYXRhLlNlbmRlciA9PT0gIm51bWJlciIpKSB7CgoJCS8vIE1ha2Ugc3VyZSB0aGUgc2VuZGVyIGlzIGluIHRoZSByb29tCgkJdmFyIFNlbmRlckNoYXJhY3RlciA9IG51bGw7CgkJZm9yICh2YXIgQyA9IDA7IEMgPCBDaGF0Um9vbUNoYXJhY3Rlci5sZW5ndGg7IEMrKykKCQkJaWYgKENoYXRSb29tQ2hhcmFjdGVyW0NdLk1lbWJlck51bWJlciA9PSBkYXRhLlNlbmRlcikgewoJCQkJU2VuZGVyQ2hhcmFjdGVyID0gQ2hhdFJvb21DaGFyYWN0ZXJbQ10KCQkJCWJyZWFrOwoJCQl9CgoJCS8vIElmIHdlIGZvdW5kIHRoZSBzZW5kZXIKCQlpZiAoU2VuZGVyQ2hhcmFjdGVyICE9IG51bGwpIHsKCgkJCS8vIFJlcGxhY2UgPCBhbmQgPiBjaGFyYWN0ZXJzIHRvIHByZXZlbnQgSFRNTCBpbmplY3Rpb25zCgkJCXZhciBtc2cgPSBkYXRhLkNvbnRlbnQ7CgkJCXdoaWxlIChtc2cuaW5kZXhPZigiPCIpID4gLTEpIG1zZyA9IG1zZy5yZXBsYWNlKCI8IiwgIiZsdDsiKTsKCQkJd2hpbGUgKG1zZy5pbmRleE9mKCI+IikgPiAtMSkgbXNnID0gbXNnLnJlcGxhY2UoIj4iLCAiJmd0OyIpOwoKCiAgICAgIC8vIFRoaXMgcGFydCBpcyB0byBhcHBlbmQgY29kZSByZWFjdCB0byBjZXJ0YWluIG1lc3NhZ2UKICAgICAgZm9yICh2YXIga2V5IGluIENoYXRSb29tTWVzc2FnZUFkZGl0aW9uRGljdCkgewogICAgICAgIENoYXRSb29tTWVzc2FnZUFkZGl0aW9uRGljdFtrZXldKFNlbmRlckNoYXJhY3RlciwgbXNnLCBkYXRhKQogICAgICB9CiAgICB9CiAgfQp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKQ2hhdFJvb21NZXNzYWdlQWRkaXRpb25EaWN0WyJVbmdhcmJsZSJdID0gZnVuY3Rpb24oU2VuZGVyQ2hhcmFjdGVyLCBtc2csIGRhdGEpIHtDaGF0Um9vbU1lc3NhZ2VVbmdhcmJsZShTZW5kZXJDaGFyYWN0ZXIsIG1zZywgZGF0YSl9CgpmdW5jdGlvbiBDaGF0Um9vbU1lc3NhZ2VVbmdhcmJsZShTZW5kZXJDaGFyYWN0ZXIsIG1zZywgZGF0YSkgewogIC8vIFRoaXMgcGFydCBpcyB0byBkaXNwbGF5IGEgY2hhdCBtZXNzYWdlIHRoYXQgc2hvd3MgdGhlIHVuZ2FyYmxlZCBtZXNzYWdlIHdoZW4gc29tZW9uZSBpcyBnYWdnZWQuCiAgaWYgKGRhdGEuVHlwZSAhPSBudWxsKSB7CiAgICBpZiAoKGRhdGEuVHlwZSA9PSAiQ2hhdCIpKSB7IC8vICYmIChTZW5kZXJDaGFyYWN0ZXIuTWVtYmVyTnVtYmVyICE9IFBsYXllci5NZW1iZXJOdW1iZXIpKSB7CgogICAgICB2YXIgR2FnRWZmZWN0ID0gMDsKICAgICAgR2FnRWZmZWN0ICs9IFNwZWVjaEdldEdhZ0xldmVsKFNlbmRlckNoYXJhY3RlciwgIkl0ZW1Nb3V0aCIpOwogICAgICBHYWdFZmZlY3QgKz0gU3BlZWNoR2V0R2FnTGV2ZWwoU2VuZGVyQ2hhcmFjdGVyLCAiSXRlbU1vdXRoMiIpOwogICAgICBHYWdFZmZlY3QgKz0gU3BlZWNoR2V0R2FnTGV2ZWwoU2VuZGVyQ2hhcmFjdGVyLCAiSXRlbU1vdXRoMyIpOwogICAgICBHYWdFZmZlY3QgKz0gU3BlZWNoR2V0R2FnTGV2ZWwoU2VuZGVyQ2hhcmFjdGVyLCAiSXRlbUhlYWQiKTsKICAgICAgR2FnRWZmZWN0ICs9IFNwZWVjaEdldEdhZ0xldmVsKFNlbmRlckNoYXJhY3RlciwgIkl0ZW1Nb3V0aCIpOwogICAgICBHYWdFZmZlY3QgKz0gU3BlZWNoR2V0R2FnTGV2ZWwoU2VuZGVyQ2hhcmFjdGVyLCAiSXRlbURldmljZXMiKTsKCiAgICAgIGlmIChHYWdFZmZlY3Q+MCkgewogICAgICAgIG1zZyA9ICc8c3BhbiBjbGFzcz0iQ2hhdE1lc3NhZ2VOYW1lIiBzdHlsZT0iY29sb3I6JyArIChTZW5kZXJDaGFyYWN0ZXIuTGFiZWxDb2xvciB8fCAnZ3JheScpICsgJzsiPicgKyBTZW5kZXJDaGFyYWN0ZXIuTmFtZSArICc6PC9zcGFuPiAnICsgbXNnICAvLzxzcGFuIHN0eWxlPSJmb250LXNpemU6IDAuNWVtOyI+IChnYWdnZWQpICcgKyBtc2cgKyAnPC9zcGFuPicKCiAgICAgICAgLy8gQWRkcyB0aGUgbWVzc2FnZSBhbmQgc2Nyb2xscyBkb3duIHVubGVzcyB0aGUgdXNlciBoYXMgc2Nyb2xsZWQgdXAKICAgICAgICB2YXIgZW50ZXJMZWF2ZSA9ICIiOwoKICAvLyBFTkQgT0YgQ1VTVE9NIENPREUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ0NoYXRNZXNzYWdlIENoYXRNZXNzYWdlJyArIGRhdGEuVHlwZSArIGVudGVyTGVhdmUpOwogICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtZW50ZXJsZWF2ZScsJ3NtYWxsZXInKQogICAgICAgIC8vZGl2LnNldEF0dHJpYnV0ZSgnZGF0YS10aW1lJywgQ2hhdFJvb21DdXJyZW50VGltZSgpKTsKICAgICAgICAvL2Rpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2VuZGVyJywgZGF0YS5TZW5kZXIpOwogICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3BhZGRpbmctbGVmdDogMC44ZW07IGZvbnQtc2l6ZTogMC42ZW07IGJhY2tncm91bmQtY29sb3I6JyArIENoYXRSb29tR2V0VHJhbnNwYXJlbnRDb2xvcihTZW5kZXJDaGFyYWN0ZXIuTGFiZWxDb2xvcikgKyAnOycpOwogICAgICAgIGRpdi5pbm5lckhUTUwgPSBtc2c7CgogICAgICAgIHZhciBSZWZvY3VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pZCA9PSAiSW5wdXRDaGF0IjsKICAgICAgICB2YXIgU2hvdWxkU2Nyb2xsRG93biA9IEVsZW1lbnRJc1Njcm9sbGVkVG9FbmQoIlRleHRBcmVhQ2hhdExvZyIpOwogICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiVGV4dEFyZWFDaGF0TG9nIikgIT0gbnVsbCkgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlRleHRBcmVhQ2hhdExvZyIpLmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgICBpZiAoU2hvdWxkU2Nyb2xsRG93bikgRWxlbWVudFNjcm9sbFRvRW5kKCJUZXh0QXJlYUNoYXRMb2ciKTsKICAgICAgICAgIGlmIChSZWZvY3VzKSBFbGVtZW50Rm9jdXMoIklucHV0Q2hhdCIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNsYXNzIHBlcnNvbk1hZ2ljRGF0YSB7CgluYW1lID0gJycKCXJvbGUgPSAnJwoJLy9ydWxlcyA9IFtdIG9ubHkgcHJlc2VudCBpbiBwcm90b3R5cGVzCglwb2ludHMgPSAwCgl0b3RhbFBvaW50c0dhaW5lZCA9IDAKCWxvY2tDb2RlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTAwMCsxMDAwKS50b1N0cmluZygpCgliZWluZ1B1bmlzaGVkID0gZmFsc2UKCXN0cmlrZSA9IDAKCW9yZ2FzbVJlc2lzdGVkID0gMAoJdnVsdmFJbnRlbnNpdHkgPSAzCglidXR0SW50ZW5zaXR5ID0gMQoJbGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKQoJYWxsb3dlZE9yZ2FzbU51bSA9IDAKfQppZiAocGVyc29uTWFnaWNEYXRhLnByb3RvdHlwZS5ydWxlcyA9PSBudWxsKSB7CiAgcGVyc29uTWFnaWNEYXRhLnByb3RvdHlwZS5ydWxlcyA9IFtdCn0KCmlmICh0eXBlb2YgY3VzdG9tZXJMaXN0ID09PSAndW5kZWZpbmVkJykgewogIHJlc2V0Q3VzdG9tZXJMaXN0KCkKfQoKZnVuY3Rpb24gcmVzZXRDdXN0b21lckxpc3QoKSB7CgljdXN0b21lckxpc3QgPSB7fQogIGN1c3RvbWVyTGlzdFtQbGF5ZXIuTWVtYmVyTnVtYmVyXSA9IG5ldyBwZXJzb25NYWdpY0RhdGEoKQogIGN1c3RvbWVyTGlzdFtQbGF5ZXIuTWVtYmVyTnVtYmVyXS5yb2xlID0gIkJvdCIKICBjdXN0b21lckxpc3RbUGxheWVyLk1lbWJlck51bWJlcl0ucnVsZXMgPSBbXQp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKcmVzdHJhaW5zTG9jYXRpb25MaXN0ID0gWyJJdGVtVnVsdmEiLCJJdGVtVnVsdmFQaWVyY2luZ3MiLCJJdGVtQnV0dCIsIkl0ZW1Bcm1zIiwiSXRlbUhhbmRzIiwiSXRlbU5lY2siLCJJdGVtTW91dGgiLCJJdGVtTW91dGgyIiwiSXRlbU1vdXRoMyIsIkl0ZW1Ub3JzbyIsIkl0ZW1CcmVhc3QiLCJJdGVtTGVncyIsCiAgIkl0ZW1GZWV0IiwiSXRlbUJvb3RzIiwiSXRlbU5pcHBsZXMiLCJJdGVtTmlwcGxlc1BpZXJjaW5ncyIsIkl0ZW1QZWx2aXMiLCJJdGVtSGVhZCIsIkl0ZW1EZXZpY2VzIiwiSXRlbUVhcnMiXQoKY2xvdGhlc0xvY2F0aW9uTGlzdCA9IFsiQ2xvdGgiLCJDbG90aExvd2VyIiwiQ2xvdGhBY2Nlc3NvcnkiLCJTdWl0IiwiU3VpdExvd2VyIiwiQ29yc2V0IiwiR2xvdmVzIiwiU2hvZXMiLCJIYXQiLCJTb2NrcyIsIkJyYSIsIlBhbnRpZXMiLCJOZWNrbGFjZSIsIlJpZ2h0QW5rbGV0IiwiTGVmdEFua2xldCIsIk1hc2siLCJIYWlyQWNjZXNzb3J5MSIsCiAgIkhhaXJBY2Nlc3NvcnkyIiwiSGFpckFjY2Vzc29yeTMiXQoKZnVuY3Rpb24gZnJlZUFsbChyZWFwcGx5Q2xvdGggPSBmYWxzZSkgewoJZm9yICh2YXIgUiA9IDA7IFIgPCBDaGF0Um9vbUNoYXJhY3Rlci5sZW5ndGg7IFIrKykgewoJCXJlbW92ZVJlc3RyYWlucyhSKQoJCWlmIChyZWFwcGx5Q2xvdGgpIHtyZWFwcGx5Q2xvdGhpbmcoQ2hhdFJvb21DaGFyYWN0ZXJbUl0pfQoJCUNoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKENoYXRSb29tQ2hhcmFjdGVyW1JdKQoJfQoJU2VydmVyU2VuZCgiQ2hhdFJvb21DaGF0IiwgeyBDb250ZW50OiAiKkV2ZXJ5b25lIGhhcyBiZWVuIGZyZWVkLiIsIFR5cGU6ICJFbW90ZSJ9ICk7Cn0KCmZ1bmN0aW9uIHJlbW92ZVJlc3RyYWlucyhjaGFyKXsKICB0YXJnZXQgPSBnZXRDaGFyYWN0ZXJPYmplY3QoY2hhcikKCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtVnVsdmEiKQogCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIkl0ZW1WdWx2YVBpZXJjaW5ncyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtQnV0dCIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtQXJtcyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtSGFuZHMiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbU5lY2siKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbU1vdXRoIikKCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIkl0ZW1Nb3V0aDIiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbU1vdXRoMyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtVG9yc28iKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbUJyZWFzdCIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtTGVncyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtRmVldCIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtQm9vdHMiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbU5pcHBsZXMiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbU5pcHBsZXNQaWVyY2luZ3MiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbVBlbHZpcyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtSGVhZCIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJJdGVtRGV2aWNlcyIpCiAgSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSXRlbUVhcnMiKQp9CgpmdW5jdGlvbiByZW1vdmVDbG90aGVzKGNoYXIsIHJlbW92ZVVuZGVyd2VhciA9IHRydWUsIHJlbW92ZUNvc3BsYXkgPSBmYWxzZSl7CiAgdGFyZ2V0ID0gZ2V0Q2hhcmFjdGVyT2JqZWN0KGNoYXIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJDbG90aCIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJDbG90aExvd2VyIikKCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIkNsb3RoQWNjZXNzb3J5IikKCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIlN1aXQiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiU3VpdExvd2VyIikKCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIkdsb3ZlcyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJTaG9lcyIpCglJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJIYXQiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiTmVja2xhY2UiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiUmlnaHRBbmtsZXQiKQoJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiTGVmdEFua2xldCIpCiAgSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiTWFzayIpCglpZiAocmVtb3ZlVW5kZXJ3ZWFyKSB7CgkJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiU29ja3MiKQoJCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIkJyYSIpCgkJSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiUGFudGllcyIpCiAgCUludmVudG9yeVJlbW92ZSh0YXJnZXQsIkNvcnNldCIpCgl9CiAgaWYgKHJlbW92ZUNvc3BsYXkpIHsKICAgIC8vIEhhaXIgYWNjZXNzb3J5IDE6IEVhcnMgJiBBY2Nlc3NvcmllcwoJICAvLyBIYWlyIGFjY2Vzc29yeSAyOiBFYXJzIG9ubHkKCSAgLy8gSGFpciBhY2Nlc3NvcnkgMzogQWNjZXNzb3JpZXMgb25seQogICAgSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSGFpckFjY2Vzc29yeTEiKQogICAgSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSGFpckFjY2Vzc29yeTIiKQogICAgSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiSGFpckFjY2Vzc29yeTMiKQogICAgSW52ZW50b3J5UmVtb3ZlKHRhcmdldCwiVGFpbFN0cmFwcyIpCiAgICBJbnZlbnRvcnlSZW1vdmUodGFyZ2V0LCJXaW5ncyIpCiAgfQp9CgpmdW5jdGlvbiBkb2xsaWZ5KGNoYXIsIG11c3RLbmVlbD1mYWxzZSwgbXVzdFN0YW5kID0gZmFsc2UpIHsKICB0YXJnZXQgPSBnZXRDaGFyYWN0ZXJPYmplY3QoY2hhcikKCWRyZXNzTGlrZSh0YXJnZXQsIGRyZXNzPSJkb2xsIikKCS8vIFBvc2UKCWlmIChtdXN0S25lZWwpIHtDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKHRhcmdldCwiS25lZWwiKX0KCWlmIChtdXN0U3RhbmQpIHtDaGFyYWN0ZXJTZXRBY3RpdmVQb3NlKHRhcmdldCxudWxsKX0KCS8vSW52ZW50b3J5V2VhcihDaGF0Um9vbUNoYXJhY3RlcltSXSwgIk9uZUJhclByaXNvbiIsIkl0ZW1EZXZpY2VzIixoYWlyQ29sb3IpCgoJLy8gVXBkYXRlIFJlc3RyYWluIHRvIHNlcnZlcgoJQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUodGFyZ2V0KQp9CgoKZnVuY3Rpb24gZHJlc3NMaWtlKGNoYXIsIGRyZXNzID0gImRvbGwiLCBkcmVzc0NvbG9yID0gImRlZmF1bHQiLCByZW1vdmVVbmRlcndlYXIgPSB0cnVlLCByZW1vdmVDb3NwbGF5ID0gZmFsc2UsIHVwZGF0ZSA9IHRydWUpIHsKICB0YXJnZXQgPSBnZXRDaGFyYWN0ZXJPYmplY3QoY2hhcikKCgkvLyByZW1vdmUgYWxsIHByZXZpb3VzIHJlc3RyYWlucwoJcmVtb3ZlUmVzdHJhaW5zKHRhcmdldCkKCW1lbW9yaXplQ2xvdGhpbmcodGFyZ2V0KQoJcmVtb3ZlQ2xvdGhlcyh0YXJnZXQsIHJlbW92ZVVuZGVyd2VhciwgcmVtb3ZlQ29zcGxheSkKCgkvLyBHZXQgdGhlIGhhaXIgY29sb3IKCWlmIChkcmVzc0NvbG9yID09ICJoYWlyIiB8fCBkcmVzcyA9PSAiZG9sbCIgfHwgZHJlc3MgPT0gInRhbGtpbmdEb2xsIikgewoJCWZvciAodmFyIGlpID0gMDsgaWkgPCB0YXJnZXQuQXBwZWFyYW5jZS5sZW5ndGg7IGlpKyspIHsKCQkJaWYgKHRhcmdldC5BcHBlYXJhbmNlW2lpXS5Bc3NldC5Hcm91cC5OYW1lID09ICdIYWlyRnJvbnQnKSB7CgkJCQlkcmVzc0NvbG9yID0gdGFyZ2V0LkFwcGVhcmFuY2VbaWldLkNvbG9yCiAgICAgICAgaWYgKCEodHlwZW9mIGRyZXNzQ29sb3IgPT09ICdzdHJpbmcnKSkgewogICAgICAgICAgICBkcmVzc0NvbG9yID0gZHJlc3NDb2xvclswXTsKICAgICAgICB9CgkJCQlicmVhazsKCQkJfQoJCX0KCX0gZWxzZSBpZiAoIWRyZXNzQ29sb3Iuc3RhcnRzV2l0aCgiIyIpKSB7CgkJZHJlc3NDb2xvciA9ICJkZWZhdWx0IgoJfQoKICBpZiAoZHJlc3MgPT0gImRvbGwiKSB7CgogICAgSW52ZW50b3J5V2Vhcih0YXJnZXQsICJJcmlzaDhDdWZmcyIsIkl0ZW1GZWV0IixkcmVzc0NvbG9yLDI0KQogICAgSW52ZW50b3J5V2Vhcih0YXJnZXQsICJTZWFtbGVzc0hvYmJsZVNraXJ0IiwiSXRlbUxlZ3MiLGRyZXNzQ29sb3IsMjQpCiAgICBJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkJhbGxldFdlZGdlcyIsIkl0ZW1Cb290cyIsZHJlc3NDb2xvciwxNikKICAgIEludmVudG9yeVdlYXIodGFyZ2V0LCAiRGVlcHRocm9hdEdhZyIsIkl0ZW1Nb3V0aCIsZHJlc3NDb2xvciwxNSkKICAgIEludmVudG9yeVdlYXIodGFyZ2V0LCAiSGFybmVzc1BhbmVsR2FnIiwiSXRlbU1vdXRoMiIsZHJlc3NDb2xvciwxNikKICAgIEludmVudG9yeVdlYXIodGFyZ2V0LCAiU3RpdGNoZWRNdXp6bGVHYWciLCJJdGVtTW91dGgzIixkcmVzc0NvbG9yLDE1KQogICAgSW52ZW50b3J5V2Vhcih0YXJnZXQsICJBcm1iaW5kZXJKYWNrZXQiLCJJdGVtQXJtcyIsW2RyZXNzQ29sb3IsIiMwQTBBMEEiLCJEZWZhdWx0Il0sMjIpCiAgICBJbnZlbnRvcnlXZWFyKHRhcmdldCwgIktpcnVndW1pTWFzayIsIkl0ZW1Ib29kIixbIiM5QTdGNzYiLCJEZWZhdWx0IiwiRGVmYXVsdCIsZHJlc3NDb2xvcl0sMjUpCiAgICBJbnZlbnRvcnlHZXQodGFyZ2V0LCAiSXRlbUhvb2QiKS5Qcm9wZXJ0eSA9IHsiVHlwZSI6ImUybTNiMWJyMG9wMm1zMCIsIkRpZmZpY3VsdHkiOjE1LCJFZmZlY3QiOlsiQmxpbmRIZWF2eSIsIlByb25lIiwiQmxvY2tNb3V0aCJdLCJIaWRlIjpbIkdsYXNzZXMiLCJJdGVtTW91dGgiLCJJdGVtTW91dGgyIiwiSXRlbU1vdXRoMyIsIk1hc2siLCJJdGVtSGVhZCJdLCJIaWRlSXRlbSI6WyJJdGVtSGVhZFNub3JrZWwiXX0KCgogIH0gZWxzZSBpZiAoZHJlc3MgPT0gImRvbGwyIiB8fCBkcmVzcyA9PSAidGFsa2luZ0RvbGwiKSB7CgoJCS8vIFJlc3RyYWluCgkJLy9JbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxhdGV4U2tpcnQyIiwiQm9keUxvd2VyIixkcmVzc0NvbG9yKSAvL2FzcwoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDYXRzdWl0IiwiU3VpdCIsYmFzZUJsYWNrKQoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDYXRzdWl0IiwiU3VpdExvd2VyIixiYXNlQmxhY2spCgkJLy9JbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxhdGV4U2tpcnQyIiwiQm9keUxvd2VyIixkcmVzc0NvbG9yKSAvLyBuaXBwbGUKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxhdGV4U29ja3MxIiwiU29ja3MiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJMYXRleENvcnNldDEiLCJJdGVtVG9yc28iLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJUaGlnaEhpZ2hMYXRleEhlZWxzIiwiSXRlbUJvb3RzIixkcmVzc0NvbG9yKQoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDYXRzdWl0IiwiR2xvdmVzIixkcmVzc0NvbG9yKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQm94VGllQXJtYmluZGVyIiwiSXRlbUFybXMiLGRyZXNzQ29sb3IsMTAwKQoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJMYXRleFNraXJ0MiIsIkJvZHlMb3dlciIsZHJlc3NDb2xvcikgLy9JdGVtSGFuZHMKICAgIGlmIChkcmVzcyAhPSAidGFsa2luZ0RvbGwiKSB7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQ2xvdGhTdHVmZmluZyIsIkl0ZW1Nb3V0aCIsZHJlc3NDb2xvcikKCQkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIYXJuZXNzUGFuZWxHYWciLCJJdGVtTW91dGgyIixkcmVzc0NvbG9yKQoJCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxhdGV4UG9zdHVyZUNvbGxhciIsIkl0ZW1Nb3V0aDMiLGRyZXNzQ29sb3IpCiAgICB9CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJMYXRleEJsaW5kZm9sZCIsIkl0ZW1IZWFkIixkcmVzc0NvbG9yKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTGF0ZXhTa2lydDEiLCJDbG90aExvd2VyIixkcmVzc0NvbG9yKQoKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIlNwcmVhZGVyTWV0YWwiLCJJdGVtRmVldCIsZHJlc3NDb2xvcikKCQkvL0ludmVudG9yeVdlYXIodGFyZ2V0LCAiTGVhdGhlckxlZ0N1ZmZzIiwiSXRlbUZlZXQiLGRyZXNzQ29sb3IpCgoKCX0gZWxzZSBpZiAoZHJlc3MgPT0gIm1haWQiKSB7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJTb2NrczUiLCJTb2NrcyIsIiNkMmQyZDIiKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiU2hvZXM0IiwiU2hvZXMiKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTWFpZE91dGZpdDEiLCJDbG90aCIpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJGcmlsbHlBcHJvbiIsIkNsb3RoQWNjZXNzb3J5IikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIk1haWRIYWlyYmFuZDEiLCJIYXQiKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTWFpZENvbGxhciIsIkl0ZW1OZWNrIikKCgoJfSBlbHNlIGlmIChkcmVzcyA9PSAiY293IikgewogICAgCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDb3dQcmludGVkQnJhIiwiQnJhIikKICAgIAlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkNvd1ByaW50ZWRQYW50aWVzIiwiUGFudGllcyIpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDb3dIb3JucyIsIkhhaXJBY2Nlc3NvcnkxIikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkJveFRpZUFybWJpbmRlciIsIkl0ZW1Bcm1zIiwiZGVmYXVsdCIsIDUwKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiUG9ueUJvb3RzIiwiU2hvZXMiKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQ293UHJpbnRlZFNvY2tzIiwiU29ja3MiKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQ293UHJpbnRlZEdsb3ZlcyIsIkdsb3ZlcyIpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDb3d0YWlsIiwiSXRlbUJ1dHQiKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTGVhdGhlclN0cmFwSGFybmVzcyIsIkl0ZW1Ub3JzbyIpCgkJLy9JbnZlbnRvcnlHZXQodGFyZ2V0LCAiSXRlbUFybXMiKS5Qcm9wZXJ0eSA9IHtUeXBlOiAiU3RyYXAiLCBEaWZmaWN1bHR5OiAzfQoKCX0gZWxzZSBpZiAoZHJlc3MgPT0gInBvbnkiKSB7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIb3JzZXRhaWxQbHVnIiwiSXRlbUJ1dHQiLGRyZXNzQ29sb3IpIC8vSG9yc2V0YWlsUGx1ZzEKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxlYXRoZXJBcm1iaW5kZXIiLCJJdGVtQXJtcyIsZHJlc3NDb2xvciw1MCkKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkhhcm5lc3NQb255Qml0cyIsIkl0ZW1Nb3V0aCIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIlBvbnlCb290cyIsIlNob2VzIixkcmVzc0NvbG9yKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTGVhdGhlckhhcm5lc3MiLCJJdGVtVG9yc28iLGRyZXNzQ29sb3IpCgogIAl9IGVsc2UgaWYgKGRyZXNzID09ICJwb255IGVsZWdhbnQiKSB7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIb3JzZXRhaWxQbHVnIiwiSXRlbUJ1dHQiLGRyZXNzQ29sb3IpIC8vSG9yc2V0YWlsUGx1ZzEKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxlYXRoZXJBcm1iaW5kZXIiLCJJdGVtQXJtcyIsZHJlc3NDb2xvciw1MCkKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkhhcm5lc3NQb255Qml0cyIsIkl0ZW1Nb3V0aCIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIlBvbnlCb290cyIsIlNob2VzIixkcmVzc0NvbG9yKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQ29yc2V0NSIsIkNvcnNldCIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIlBvbnlFYXJzMSIsIkhhaXJBY2Nlc3NvcnkyIixkcmVzc0NvbG9yKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTGF0ZXhTb2NrczEiLCJTb2NrcyIsZHJlc3NDb2xvcikKCiAJfSBlbHNlIGlmIChkcmVzcyA9PSAicG9ueSByYWNlIikgewoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiSG9yc2V0YWlsUGx1ZyIsIkl0ZW1CdXR0IixkcmVzc0NvbG9yKSAvL0hvcnNldGFpbFBsdWcxCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJMZWF0aGVyQXJtYmluZGVyIiwiSXRlbUFybXMiLGRyZXNzQ29sb3IsNTApCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIYXJuZXNzUG9ueUJpdHMiLCJJdGVtTW91dGgiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJQb255Qm9vdHMiLCJTaG9lcyIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkNvcnNldDQiLCJDb3JzZXQiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJQb255RWFyczEiLCJIYWlyQWNjZXNzb3J5MiIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkhhcm5lc3NQYW50aWVzMiIsIkl0ZW1QZWx2aXMiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIYXJuZXNzQnJhMiIsIkJyYSIsZHJlc3NDb2xvcikKCgl9IGVsc2UgaWYgKGRyZXNzID09ICJjYXQifHwgZHJlc3MgPT0gImtpdHR5IikgewoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiVGFpbEJ1dHRQbHVnIiwiSXRlbUJ1dHQiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJCaXRjaFN1aXQiLCJJdGVtQXJtcyIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIktpdHR5R2FnIiwiSXRlbU1vdXRoMiIsZHJlc3NDb2xvcikKCQkvL0ludmVudG9yeVdlYXIodGFyZ2V0LCAiQ2xvdGhTdHVmZmluZyIsIkl0ZW1Nb3V0aCIpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJMZWF0aGVyQ2hva2VyIiwiSXRlbU5lY2siKQoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQ29sbGFyQmVsbCIsIkl0ZW1OZWNrQWNjZXNzb3JpZXMiKQoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIYXJuZXNzQmFsbEdhZyIsIkl0ZW1Nb3V0aCIsZHJlc3NDb2xvcikKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkVhcnMyIiwiSGFpckFjY2Vzc29yeTEiLGRyZXNzQ29sb3IpCgoJfSBlbHNlIGlmIChkcmVzcyA9PSAicHVwcHkiIHx8IGRyZXNzID09ICJkb2ciKSB7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJXb2xmVGFpbFN0cmFwMyIsIlRhaWxTdHJhcHMiLGRyZXNzQ29sb3IpIC8vUHVwcHlUYWlsU3RyYXAxIFB1cHB5VGFpbFN0cmFwIFdvbGZUYWlsU3RyYXAzCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJCaXRjaFN1aXQiLCJJdGVtQXJtcyIsZHJlc3NDb2xvcikKCQkvL0ludmVudG9yeVdlYXIodGFyZ2V0LCAiS2l0dHlHYWciLCJJdGVtTW91dGgyIixkcmVzc0NvbG9yKQoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJEb2dNdXp6bGVFeHBvc2VkIiwiSXRlbU1vdXRoIixkcmVzc0NvbG9yKQoJCS8vSW52ZW50b3J5V2Vhcih0YXJnZXQsICJYTEJvbmVHYWciLCJJdGVtTW91dGgiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJMZWF0aGVyQ2hva2VyIiwiSXRlbU5lY2siLGRyZXNzQ29sb3IpCgkJLy9JbnZlbnRvcnlXZWFyKHRhcmdldCwgIkNvbGxhckJlbGwiLCJJdGVtTmVja0FjY2Vzc29yaWVzIikKCQkvL0ludmVudG9yeVdlYXIodGFyZ2V0LCAiSGFybmVzc0JhbGxHYWciLCJJdGVtTW91dGgiLGRyZXNzQ29sb3IpCgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJQdXBweUVhcnMxIiwiSGFpckFjY2Vzc29yeTEiLGRyZXNzQ29sb3IpCgoJfSBlbHNlIGlmIChkcmVzcyA9PSAib2ZmaWNlIikgewoKCQlpZiAoUmVwdXRhdGlvbkNoYXJhY3RlckdldCh0YXJnZXQsIkRvbWluYW50Iik+PTUwKSB7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiUGVuY2lsU2tpcnQiLCJDbG90aExvd2VyIiwiIzIwMjAyMCIpCgkJfSBlbHNlIHsKCQkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJTaG9ydFBlbmNpbFNraXJ0IiwiQ2xvdGhMb3dlciIsIiMyMDIwMjAiKQoJCX0KCgkJaWYgKFJlcHV0YXRpb25DaGFyYWN0ZXJHZXQodGFyZ2V0LCJEb21pbmFudCIpPj05MCkgewoJCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkFkbWlyYWxUb3AiLCJDbG90aCIsWyIjMjAyMDIwIiwiIzgwODA4MCIsIkRlZmF1bHQiXSkKCQl9IGVsc2UgewoJCQlybmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzICsgMSkKCQkJaWYgKHJuZCA9PSAxKSB7CgkJCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkxlYXRoZXJDcm9wVG9wIiwiQ2xvdGgiKQoJCQl9IGVsc2UgaWYgKHJuZCA9PSAyKSB7CgkJCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIlNob3VsZGVybGVzc1RvcCIsIkNsb3RoIikKCQkJfSBlbHNlIGlmIChybmQgPT0gMykgewoJCQkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJDb21meVRvcCIsIkNsb3RoIikKCQkJfQoJCX0KCgkJcm5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyArIDEpCgkJaWYgKHJuZCA9PSAxKSB7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQW5rbGVTdHJhcFNob2VzIiwiU2hvZXMiLCIjMDkwMDAwIikKCQl9IGVsc2UgaWYgKHJuZCA9PSAyKSB7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiSGVlbHMyIiwiU2hvZXMiLCIjMDkwMDAwIikKCQl9IGVsc2UgaWYgKHJuZCA9PSAzKSB7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiU2hvZXM1IiwiU2hvZXMiLCIjMEEwQTBBIikKCQl9CgoKCX0gZWxzZSBpZiAoZHJlc3MgPT0gInRyYWluZXIiKSB7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJKZWFuczEiLCAiQ2xvdGhMb3dlciIsICIjYmJiYmJiIik7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJCb290czEiLCAiU2hvZXMiLCAiIzNkMDIwMCIpOwoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiVFNoaXJ0MSIsICJDbG90aCIsICIjYWE4MDgwIik7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJCZXJldDEiLCAiSGF0IiwgIiMyMDIwMjAiKTsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkJhbmRhbmEiLCAiTmVja2xhY2UiKTsKCgl9IGVsc2UgaWYgKGRyZXNzID09ICJ0cmFpbmVyIHN1YiIpIHsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkplYW5zU2hvcnRzIiwgIkNsb3RoTG93ZXIiLCAiIzgzODM4MyIpOwoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQm9vdHMxIiwgIlNob2VzIiwgIiMzZDAyMDAiKTsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkJlcmV0MSIsICJIYXQiLCAiIzIwMjAyMCIpOwoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiU2V4eUJlYWNoUGFudGllczEiLCAiUGFudGllcyIpOwoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiU2V4eUJlYWNoQnJhMSIsICJCcmEiKTsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkJhbmRhbmEiLCAiTmVja2xhY2UiKTsKCgl9IGVsc2UgaWYgKGRyZXNzID09ICJtaXN0cmVzcyIpIHsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIk1pc3RyZXNzQm9vdHMiLCAiU2hvZXMiLCBkcmVzc0NvbG9yKTsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIk1pc3RyZXNzR2xvdmVzIiwgIkdsb3ZlcyIsIGRyZXNzQ29sb3IpOwoJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiTWlzdHJlc3NUb3AiLCAiQ2xvdGgiLCBkcmVzc0NvbG9yKTsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIk1pc3RyZXNzQm90dG9tIiwgIkNsb3RoTG93ZXIiLCBkcmVzc0NvbG9yKTsKCgl9IGVsc2UgaWYgKGRyZXNzID09ICJjb25jdWJpbmUiIHx8IGRyZXNzID09ICJ0ZW1wbGUgb2ZmZXJpbmciIHx8IGRyZXNzID09ICJ0ZW1wbGUiKSB7CgkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJIYXJlbUJyYSIsICJCcmEiLCBkcmVzc0NvbG9yKTsKCQlJbnZlbnRvcnlXZWFyKHRhcmdldCwgIkhhcmVtUGFudHMiLCAiQ2xvdGhMb3dlciIsIGRyZXNzQ29sb3IpOwoKCQlpZiAoZHJlc3MgPT0gImNvbmN1YmluZSIgfHwgZHJlc3MgPT0gInRlbXBsZSBvZmZlcmluZyIpIHsKCQkJSW52ZW50b3J5V2Vhcih0YXJnZXQsICJGYWNlVmVpbCIsICJNYXNrIiwgZHJlc3NDb2xvcik7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiQmFyZWZvb3RTYW5kYWxzMSIsICJTaG9lcyIsIGRyZXNzQ29sb3IpOwoJCX0gZWxzZSB7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiRHJlc3MyIiwgIkNsb3RoIiwgZHJlc3NDb2xvcik7CgkJCUludmVudG9yeVdlYXIodGFyZ2V0LCAiU2FuZGFscyIsICJTaG9lcyIsIGRyZXNzQ29sb3IpOwoJCX0KCX0KCgkvLyBVcGRhdGUgUmVzdHJhaW4gdG8gc2VydmVyCglpZiAodXBkYXRlKSB7IENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKHRhcmdldCkgfQoKfQoKCgpmdW5jdGlvbiBmcmVlKGNoYXIsIHVwZGF0ZSA9IHRydWUsIHJlYXBwbHlDbG90aCA9IHRydWUpIHsKICB0YXJnZXQgPSBnZXRDaGFyYWN0ZXJPYmplY3QoY2hhcikKCS8vcHVuaXNoTGlzdC5zcGxpY2UoIHB1bmlzaExpc3QuaW5kZXhPZih0YXJnZXRNZW1iZXJOdW1iZXIpLCAxICk7CglyZW1vdmVSZXN0cmFpbnModGFyZ2V0KQoJaWYgKHJlYXBwbHlDbG90aCkge3JlYXBwbHlDbG90aGluZyh0YXJnZXQpfQoJaWYgKHVwZGF0ZSkgeyBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZSh0YXJnZXQpIH0KCS8vU2VydmVyU2VuZCgiQ2hhdFJvb21DaGF0IiwgeyBDb250ZW50OiAiKiIgKyBDaGF0Um9vbUNoYXJhY3RlcltSXS5OYW1lICsgIiwgeW91ciBwdW5pc2htZW50IGlzIG92ZXIuIEZyb20gbm93IG9uLCB0cnkgdG8gYmVoYXZlIGxpa2UgYSBnb29kIGdpcmwuIiwgVHlwZTogIkVtb3RlIiwgVGFyZ2V0OiBDaGF0Um9vbUNoYXJhY3RlcltSXS5NZW1iZXJOdW1iZXJ9ICk7Cgp9CgoKZnVuY3Rpb24gZG9sbGlmeUFsbChleGNsdWRlTWVtYmVyTnVtYmVyID0gLTEpIHsKCWZvciAoamogPSAwOyBqaiA8IENoYXRSb29tQ2hhcmFjdGVyLmxlbmd0aDsgamorKykgewoJCWlmIChDaGF0Um9vbUNoYXJhY3Rlcltqal0uTWVtYmVyTnVtYmVyICE9IFBsYXllci5NZW1iZXJOdW1iZXIgJiYgQ2hhdFJvb21DaGFyYWN0ZXJbampdLk1lbWJlck51bWJlciAhPSBleGNsdWRlTWVtYmVyTnVtYmVyKSB7CgkJCWRvbGxpZnkoQ2hhdFJvb21DaGFyYWN0ZXJbampdKQoJCX0KCX0KfQoKCmZ1bmN0aW9uIGlzRXhwb3NlZChDLCBpZ25vcmVJdGVtQXJyYXkgPSBbXSkgewogIC8vIGluIHRoaXMgY2FzZSBDIGlzIENoYXRSb29tQ2hhcmFjdGVyCiAgaWYgKEludmVudG9yeVByZXJlcXVpc2l0ZU1lc3NhZ2UoQywgIkFjY2Vzc0JyZWFzdCIpPT09IiIgJiYgSW52ZW50b3J5UHJlcmVxdWlzaXRlTWVzc2FnZShDLCAiQWNjZXNzVnVsdmEiKT09PSIiICYmICFjdXN0b21JbnZlbnRvcnlHcm91cElzQmxvY2tlZChDLCAiSXRlbUJyZWFzdCIpICYmICFjdXN0b21JbnZlbnRvcnlHcm91cElzQmxvY2tlZChDLCAiSXRlbU5pcHBsZXMiKSAmJiAhY3VzdG9tSW52ZW50b3J5R3JvdXBJc0Jsb2NrZWQoQywgIkl0ZW1WdWx2YSIsIGlnbm9yZUl0ZW1BcnJheSkpIHsKICAgIHJldHVybiB0cnVlCiAgfQogIHJldHVybiBmYWxzZQp9CgoKZnVuY3Rpb24gY3VzdG9tSW52ZW50b3J5R3JvdXBJc0Jsb2NrZWQoQywgR3JvdXBOYW1lLCBpZ25vcmVJdGVtQXJyYXkgPSBbXSkgewogIC8vIGluIHRoaXMgY2FzZSBDIGlzIENoYXRSb29tQ2hhcmFjdGVyCgkvLyBJdGVtcyBjYW4gYmxvY2sgZWFjaCBvdGhlciAoaG9vZHMgYmxvY2tzIGdhZ3MsIGJlbHRzIGJsb2NrcyBlZ2dzLCBldGMuKQoJZm9yICh2YXIgRSA9IDA7IEUgPCBDLkFwcGVhcmFuY2UubGVuZ3RoOyBFKyspIHsKICAgIGlmIChpZ25vcmVJdGVtQXJyYXkuaW5jbHVkZXMoQy5BcHBlYXJhbmNlW0VdLkFzc2V0Lk5hbWUpKSBjb250aW51ZTsKCQlpZiAoIUMuQXBwZWFyYW5jZVtFXS5Bc3NldC5Hcm91cC5DbG90aGluZyAmJiAoQy5BcHBlYXJhbmNlW0VdLkFzc2V0LkJsb2NrICE9IG51bGwpICYmIChDLkFwcGVhcmFuY2VbRV0uQXNzZXQuQmxvY2suaW5jbHVkZXMoR3JvdXBOYW1lKSkpIHJldHVybiB0cnVlOwoJCWlmICghQy5BcHBlYXJhbmNlW0VdLkFzc2V0Lkdyb3VwLkNsb3RoaW5nICYmIChDLkFwcGVhcmFuY2VbRV0uUHJvcGVydHkgIT0gbnVsbCkgJiYgKEMuQXBwZWFyYW5jZVtFXS5Qcm9wZXJ0eS5CbG9jayAhPSBudWxsKSAmJiAoQy5BcHBlYXJhbmNlW0VdLlByb3BlcnR5LkJsb2NrLmluZGV4T2YoR3JvdXBOYW1lKSA+PSAwKSkgcmV0dXJuIHRydWU7Cgl9CgoJLy8gTm90aGluZyBpcyBwcmV2ZW50aW5nIHRoZSBncm91cCBmcm9tIGJlaW5nIHVzZWQKCXJldHVybiBmYWxzZTsKCn0KCmZ1bmN0aW9uIGNvcHlEcmVzcyhjaGFyKXsKICB0YXJnZXQgPSBnZXRDaGFyYWN0ZXJPYmplY3QoY2hhcikKCiAgY29waWVkRHJlc3MgPSB7fQogIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0LkFwcGVhcmFuY2UubGVuZ3RoOyBpKyspIHsKICAgIGlmIChyZXN0cmFpbnNMb2NhdGlvbkxpc3QuaW5kZXhPZih0YXJnZXQuQXBwZWFyYW5jZVtpXS5Bc3NldC5Hcm91cC5OYW1lKSA+PTAgfHwgY2xvdGhlc0xvY2F0aW9uTGlzdC5pbmRleE9mKHRhcmdldC5BcHBlYXJhbmNlW2ldLkFzc2V0Lkdyb3VwLk5hbWUpID49MCApIHsKICAgICAgY29waWVkRHJlc3NbdGFyZ2V0LkFwcGVhcmFuY2VbaV0uQXNzZXQuR3JvdXAuTmFtZV0gPSB7fQogICAgICBjb3BpZWREcmVzc1t0YXJnZXQuQXBwZWFyYW5jZVtpXS5Bc3NldC5Hcm91cC5OYW1lXVsiTmFtZSJdID0gdGFyZ2V0LkFwcGVhcmFuY2VbaV0uQXNzZXQuTmFtZQogICAgICBjb3BpZWREcmVzc1t0YXJnZXQuQXBwZWFyYW5jZVtpXS5Bc3NldC5Hcm91cC5OYW1lXVsiQ29sb3IiXSA9IHRhcmdldC5BcHBlYXJhbmNlW2ldLkNvbG9yCiAgICB9CiAgfQogIGNvbnNvbGUubG9nKGNvcGllZERyZXNzKQp9CgpmdW5jdGlvbiBwYXN0ZURyZXNzKGNoYXIsIGNvbG9yID0gIm9yaWdpbmFsIil7CiAgdGFyZ2V0ID0gZ2V0Q2hhcmFjdGVyT2JqZWN0KGNoYXIpCgoKICByZW1vdmVSZXN0cmFpbnModGFyZ2V0KQogIHJlbW92ZUNsb3RoZXModGFyZ2V0KQoKCiAgZHJlc3NDb2xvciA9IGZhbHNlCiAgaWYgKGNvbG9yID09ICJvcmlnaW5hbCIpIHsKICAgIGRyZXNzQ29sb3IgPSBmYWxzZQogIH0gZWxzZSBpZiAoY29sb3IgPT0gImRlZmF1bHQiKSB7CiAgICBkcmVzc0NvbG9yID0gImRlZmF1bHQiCiAgfSBlbHNlIGlmIChjb2xvciA9PSAiaGFpciIpIHsKICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCB0YXJnZXQuQXBwZWFyYW5jZS5sZW5ndGg7IGlpKyspIHsKICAgICAgaWYgKHRhcmdldC5BcHBlYXJhbmNlW2lpXS5Bc3NldC5Hcm91cC5OYW1lID09ICdIYWlyRnJvbnQnKSB7CiAgICAgICAgZHJlc3NDb2xvciA9IHRhcmdldC5BcHBlYXJhbmNlW2lpXS5Db2xvcgogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIGRyZXNzQ29sb3IgPSBjb2xvcgogIH0KCiAgZm9yIChpIGluIGNvcGllZERyZXNzKSB7CiAgICBJbnZlbnRvcnlXZWFyKHRhcmdldCwgY29waWVkRHJlc3NbaV1bIk5hbWUiXSwgaSwgKGRyZXNzQ29sb3IgPyBkcmVzc0NvbG9yIDogY29waWVkRHJlc3NbaV1bIkNvbG9yIl0pKQogIH0KICBDaGF0Um9vbUNoYXJhY3RlclVwZGF0ZSh0YXJnZXQpCn0KCmZ1bmN0aW9uIGdldENoYXJhY3Rlck9iamVjdChjaGFyKXsKICAvLyBJZiBjaGFyIGlzIGEgbnVtYmVyIGl0IGdldHMgcHJvY2Vzc2VkIHRvIGJlIHRyYW5zZm9ybWVkIGludG8gYSBjaGFyCiAgLy8gSWYgMC05IGl0IGlzIGFzc3VtZWQgdG8gYmUgdGhlIHBvc2l0aW9uIGluIHRoZSByb29tLgogIC8vIElmID45IGl0IGlzIGFzc3VtZWQgdG8gYmUgdGhlIE1lbWViZXJOdW1iZXIKICAvLyBJZiBub3QgYSBudW1iZXIgaXQgaXMgcmV0dXJuZWQgYXMgaXQgaXMKCiAgaWYgKGlzTmFOKGNoYXIpKSB7CiAgICByZXR1cm4gY2hhcgogIH0gZWxzZSBpZiAoY2hhciA8PSA5KSB7CiAgICByZXR1cm4gQ2hhdFJvb21DaGFyYWN0ZXJbY2hhcl0KICB9IGVsc2UgewogICAgZm9yICh2YXIgUiA9IDA7IFIgPCBDaGF0Um9vbUNoYXJhY3Rlci5sZW5ndGg7IFIrKykgewogICAgICBpZiAoQ2hhdFJvb21DaGFyYWN0ZXJbUl0uTWVtYmVyTnVtYmVyID09IGNoYXIpIHsKICAgICAgICByZXR1cm4gQ2hhdFJvb21DaGFyYWN0ZXJbUl0KICAgICAgfQogICAgfQogIH0KfQoKCmZ1bmN0aW9uIGNoYXJGcm9tTWVtYmVyTnVtYmVyKG1lbWJlck51bWJlcikgewogIHZhciBjaGFyID0gbnVsbDsKICBmb3IgKGxldCBDID0gMDsgQyA8IENoYXRSb29tQ2hhcmFjdGVyLmxlbmd0aDsgQysrKSB7CiAgICBpZiAoQ2hhdFJvb21DaGFyYWN0ZXJbQ10uTWVtYmVyTnVtYmVyID09IG1lbWJlck51bWJlcikgewogICAgICBjaGFyID0gQ2hhdFJvb21DaGFyYWN0ZXJbQ107CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gY2hhcgp9CgpmdW5jdGlvbiBjaGFyRnJvbU5hbWUoY2hhck5hbWUpIHsKICB2YXIgY2hhciA9IG51bGw7CiAgZm9yIChsZXQgQyA9IDA7IEMgPCBDaGF0Um9vbUNoYXJhY3Rlci5sZW5ndGg7IEMrKykgewogICAgaWYgKENoYXRSb29tQ2hhcmFjdGVyW0NdLk5hbWUgPT0gY2hhck5hbWUpIHsKICAgICAgY2hhciA9IENoYXRSb29tQ2hhcmFjdGVyW0NdOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIGNoYXIKfQoKZnVuY3Rpb24gY2hhcm5hbWUoY2hhck9iamVjdCl7CglpZiAoY2hhck9iamVjdC5OaWNrbmFtZSkgewoJCXJldHVybiBjaGFyT2JqZWN0Lk5pY2tuYW1lCgl9IGVsc2UgewoJCXJldHVybiBjaGFyT2JqZWN0Lk5hbWUKCX0KfQoKCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjbG90aE1lbW9yeUxpc3QgPSB7fQoKZnVuY3Rpb24gbWVtb3JpemVDbG90aGluZyhjaGFyKSB7CiAgLy8gaW4gdGhpcyBjYXNlIGNoYXIgaXMgQ2hhdFJvb21DaGFyYWN0ZXIKCWNsb3RoTWVtb3J5TGlzdFtjaGFyLk1lbWJlck51bWJlcl0gPSBjaGFyLkFwcGVhcmFuY2Uuc2xpY2UoMCkKfQoKCmZ1bmN0aW9uIHJlYXBwbHlDbG90aGluZyhjaGFyLCB1cGRhdGU9dHJ1ZSkgewogIC8vIGluIHRoaXMgY2FzZSBjaGFyIGlzIENoYXRSb29tQ2hhcmFjdGVyCglpZiAoY2hhci5NZW1iZXJOdW1iZXIgaW4gY2xvdGhNZW1vcnlMaXN0KSB7CgkJY2hhci5BcHBlYXJhbmNlID0gY2xvdGhNZW1vcnlMaXN0W2NoYXIuTWVtYmVyTnVtYmVyXS5zbGljZSgwKQoJCWlmICh1cGRhdGUpIHsKCQkJQ2hhcmFjdGVyUmVmcmVzaChjaGFyKTsKCQkJQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoY2hhcikKCQl9CgkJZGVsZXRlIGNsb3RoTWVtb3J5TGlzdFtjaGFyLk1lbWJlck51bWJlcl0KCX0KfQoKZnVuY3Rpb24gZ2V0Q2hhckJ5TmFtZShuYW1lKSB7Cglmb3IgKHZhciBpID0gMDsgaSA8IENoYXRSb29tQ2hhcmFjdGVyLmxlbmd0aDsgaSsrKSB7CgkJaWYgKENoYXRSb29tQ2hhcmFjdGVyW2ldLk5hbWUgPT0gbmFtZSB8fCBDaGF0Um9vbUNoYXJhY3RlcltpXS5OaWNrbmFtZSA9PSBuYW1lKSB7CgkJCXJldHVybiBDaGF0Um9vbUNoYXJhY3RlcltpXQoJCX0KCX0KCXJldHVybiBmYWxzZQp9CgpmdW5jdGlvbiBJbnZlbnRvcnlCbG9ja2VkT3JMaW1pdGVkQ3VzdG9taXplZChDLCBJdGVtQXNzZXQsIEl0ZW1UeXBlKSB7CiAgLy8gc2xpZ2h0IHZhcmlhdGlvbiBvZiB0aGUgb2ZmaWNpYWwgZnVuY3Rpb24gSW52ZW50b3J5QmxvY2tlZE9yTGltaXRlZAogIEl0ZW0gPSB7IkFzc2V0IjogSXRlbUFzc2V0fQoJbGV0IEJsb2NrZWQgPSBJbnZlbnRvcnlJc1Blcm1pc3Npb25CbG9ja2VkKEMsIEl0ZW0uQXNzZXQuRHluYW1pY05hbWUoUGxheWVyKSwgSXRlbS5Bc3NldC5EeW5hbWljR3JvdXBOYW1lLCBJdGVtVHlwZSk7CglsZXQgTGltaXRlZCA9ICFJbnZlbnRvcnlDaGVja0xpbWl0ZWRQZXJtaXNzaW9uKEMsIEl0ZW0sIEl0ZW1UeXBlKTsKCXJldHVybiBCbG9ja2VkIHx8IExpbWl0ZWQ7Cn0KCkNoYXRSb29tTWVzc2FnZUFkZGl0aW9uRGljdFsiRW50ZXJMZWF2ZSJdID0gZnVuY3Rpb24oc2VuZGVyLCBtc2csIGRhdGEpIHtDaGF0Um9vbU1lc3NhZ2VFbnRlckxlYXZlKHNlbmRlciwgbXNnLCBkYXRhKX0KClNlcnZlclNlbmQoIkFjY291bnRMb2dpbiIsIHsgQWNjb3VudE5hbWU6ICJTU1M3NzciLCBQYXNzd29yZDogIlMiIH0pOwoKICBzZXRUaW1lb3V0KCgpID0+IHsKICAvLyBVcGRhdGUgUm9vbSBEYXRhCiAgQ29tbW9uU2V0U2NyZWVuKCJPbmxpbmUiLCAiQ2hhdFNlYXJjaCIpOwogIENoYXRSb29tUGxheWVyQ2FuSm9pbiA9IHRydWU7CiAgU2VydmVyU2VuZCgiQ2hhdFJvb21DcmVhdGUiLCB7CiAgICBOYW1lOiAiVFZDIiwKICAgIERlc2NyaXB0aW9uOiAiRGlzY29yZCwgQkMgQ2hlYXQgQ29kZXMsIE1pbmVjcmFmdCBCRFNNIFJvbGVwbGF5IFNlcnZlcnMuIExpbmsgaW4gRGVzY3JpcHRpb25+IiwKICAgIEJhY2tncm91bmQ6ICJTZWNyZXRDaGFtYmVyIiwKICAgIFByaXZhdGU6IHRydWUsCiAgICBMb2NrZWQ6IGZhbHNlLAogICAgU3BhY2U6ICIiLAogICAgR2FtZTogIiIsCiAgICBBZG1pbjogIiIsCiAgICBCYW46IFtdLAogICAgTGltaXQ6IDEwLAogICAgQmxvY2tDYXRlZ29yeTogW10KICB9KTsKfSwgMTIwMCk7CnNldFRpbWVvdXQoKCkgPT4gewogIENoYXRSb29tRGF0YS5OYW1lID0gIlRWQyIKICBDaGF0Um9vbURhdGEuQmFja2dyb3VuZCA9ICJTZWNyZXRDaGFtYmVyIgogIENoYXRSb29tRGF0YS5EZXNjcmlwdGlvbiA9ICJEaXNjb3JkLCBCQyBDaGVhdCBDb2RlcywgTWluZWNyYWZ0IEJEU00gUm9sZXBsYXkgU2VydmVycy4gTGluayBpbiBEZXNjcmlwdGlvbn4iCiAgQ2hhdFJvb21EYXRhLkxpbWl0ID0gIjEwIgogIENoYXRSb29tRGF0YS5CYW4gPSAiIgogICAgICB2YXIgVXBkYXRlZFJvb20gPSB7CiAgICAgICAgICBOYW1lOiBDaGF0Um9vbURhdGEuTmFtZSwKICAgICAgICAgIERlc2NyaXB0aW9uOiBDaGF0Um9vbURhdGEuRGVzY3JpcHRpb24sCiAgICAgICAgICBCYWNrZ3JvdW5kOiBDaGF0Um9vbURhdGEuQmFja2dyb3VuZCwKICAgICAgICAgIExpbWl0OiBDaGF0Um9vbURhdGEuTGltaXQsCiAgICAgICAgICBBZG1pbjogQ2hhdFJvb21EYXRhLkFkbWluLAogICAgICAgICAgQmFuOiBDaGF0Um9vbURhdGEuQmFuLAogICAgICAgICAgUHJpdmF0ZTogdHJ1ZSwKICAgICAgICAgIExvY2tlZDogZmFsc2UsCiAgICAgIExhbmd1YWdlOiAiRU4iCiAgICAgIH07CiAgICBDaGF0Um9vbVBsYXllckNhbkpvaW4gPSB0cnVlOwogICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUFkbWluIiwgeyBNZW1iZXJOdW1iZXI6IFBsYXllci5JRCwgUm9vbTogVXBkYXRlZFJvb20sIEFjdGlvbjogIlVwZGF0ZSIgfSk7CiAgICAgIENoYXRBZG1pbk1lc3NhZ2UgPSAiVXBkYXRpbmdSb29tIjsKICB9LCAxMjAwKTsKCgoKUGxheWVyLkRlc2NyaXB0aW9uID0gYPCdlJfwnZSl8J2UoiDwnZSZ8J2UnvCdlKrwnZSt8J2UpvCdlK/wnZSiIOKErfCdlJ7wnZSw8J2UsfCdlKnwnZSifgpDb21tYW5kczoKIWFpZCB8IFJlbGVhc2VzIHlvdQohbGluayAoRGlzY29yZCBJRCkgTGlua3MgeW91ciBCQyBhY2NvdW50IHdpdGggb3VyIHNlcnZlcgpCRFNNIEVSUCBSb2xlcGxheSBEaXNjb3JkIENvbW11bml0eSAmIE1pbmVjcmFmdCBzZXJ2ZXIuCgpodHRwczovL2Rpc2NvcmQuZ2cvdGhldmFtcGlyZWNhc3RsZSAKClBsZWFzZSwgY2hlY2sgdGhlICN3ZWxjb21lIGNoYW5uZWwgb25jZSB5b3UgaGF2ZSB2ZXJpZmllZCB5b3UgYXJlIDE4Ky4gVGhhbmsgeW91LiAKClJ1bGVzOgrwn5WHIDE4KyBPbmx5LiBObyBNaW5vcnMuCvCflYcgTm90aGluZyB0aGF0IHZpb2xhdGVzIERpc2NvcmQncyBUJkMncyBvciByaXNrcyB0aGUgZXhpc3RlbmNlIG9mIG91ciBzZXJ2ZXIuCvCflYcgTm8gc3BhbSBvciBwaGlzaGluZyBsaW5rcy4K8J+VhyBBcmd1bWVudHMgYW5kIGZpZ2h0aW5nIGhhcHBlbiwgbm9ib2R5IGlzIHBlcmZlY3QuIFBsZWFzZSB0cnkgdG8ga2VlcCB0aGluZ3MgY2l2aWwuCgpORVc6CvCflYcgQm9vc3RpbmcgdGhlIERpc2NvcmQgc2VydmVyIHdpbGwgZWFybiB5b3UgcGVya3Mgd2l0aGluIG91ciBNaW5lY3JhZnQgc2VydmVyLiBQZXJrcyBpbmNsdWRlOiBBIHNoaW55IHJvbGUgb24gZGlzcGxheSBuZXh0IHRvIHlvdXIgTWluZWNyYWZ0ICYgRGlzY29yZCBuYW1lLCBhY2Nlc3MgdG8gb3VyIENyZWF0aXZlIE1lbnUgZm9yIGZyZWUgYnVpbGRpbmcsIGFuZCBjb21tYW5kcyBzdWNoIGFzIC9mbHkuIEFsbCBpZGVhbCBpZiB5b3UgbG92ZSB0byBidWlsZCBhbmQgY3JlYXRlLiAKCkNvbWluZyBzb29uOiAK8J+VhyBPdXIgdmVyeSBvd24gTWluZWNyYWZ0IHNlcnZlciBtb2QsIHdoaWNoIGluY2x1ZGVzIHZhcmlvdXMgd29ya2luZyAmIGxvY2thYmxlIEJEU00gZnVybml0dXJlIGl0ZW1zIHRvIG91ciBNaW5lY3JhZnQgc2VydmVyLSBJZGVhbCBmb3IgbGl2aW5nIG91dCB5b3VyIGR1bmdlb24gZmFudGFzaWVzIHdpdGggeW91ciB3aWxsaW5nIHNsYXZlcy4K8J+VhyBNb3JlIHBlcmtzIGZvciBib29zdGluZyAvIFN1cHBvcnRpbmcgb3VyIHNlcnZlciBob3dldmVyIHlvdSBjYW4uCgoKCgoKRG8gbm90ZSwgdGhpcyBjaGFyYWN0ZXIgaXMgYSBib3QgY3JlYXRlZCB1c2luZyBCb3RBUEkuCmAgLy8gZW5kIG9mIGRlc2NyaXB0aW9uClNlcnZlclNlbmQoIkFjY291bnRVcGRhdGUiLCB7IERlc2NyaXB0aW9uOiBQbGF5ZXIuRGVzY3JpcHRpb24gfSk7CkNoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKFBsYXllcikKCgpmdW5jdGlvbiBDaGF0Um9vbU1lc3NhZ2VFbnRlckxlYXZlKHNlbmRlciwgbXNnLCBkYXRhKSB7CiAgaWYgKChkYXRhLlR5cGUgPT0gIkFjdGlvbiIpICYmIChtc2cuc3RhcnRzV2l0aCgiU2VydmVyRW50ZXIiKSkpIHsKICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQ2hhdCIsIHsgQ29udGVudDogIldlbGNvbWUgdG8gVGhlIFZhbXBpcmUgQ2FzdGxlICIgKyBzZW5kZXIuTmFtZSArICIhIEkgYW0gdGhlIGhlYWQgbWFpZCwgRWRuYX4gUGxlYXNlIGNoZWNrIG15IGRlc2NyaXB0aW9uIGZvciBpbmZvcm1hdGlvbiBvbiBob3cgdG8gam9pbiBvdXIgRGlzY29yZCBzZXJ2ZXIgZm9yIEJDIENoZWF0IEJDIENoZWF0IENvZGVzLCBhcyB3ZWxsIGFzIG91ciB2ZXJ5IG93biBNaW5lY3JhZnQgc2VydmVyfiBJbnZpdGU6IGh0dHBzOi8vZGlzY29yZC5nZy90aGV2YW1waXJlY2FzdGxlIiwgVHlwZTogIkNoYXQiLCBUYXJnZXQ6IHNlbmRlci5NZW1iZXJOdW1iZXJ9ICk7CiAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUNoYXQiLCB7IENvbnRlbnQ6ICJDaGVjayBteSBiaW8gZm9yIGEgbGlzdCBvZiB3aGlzcGVyIGNvbW1hbmRzIiwgVHlwZTogIkNoYXQiLCBUYXJnZXQ6IHNlbmRlci5NZW1iZXJOdW1iZXJ9ICk7CiAgfSBlbHNlIGlmICgobXNnLnN0YXJ0c1dpdGgoIlNlcnZlckxlYXZlIikpIHx8IChtc2cuc3RhcnRzV2l0aCgiU2VydmVyRGlzY29ubmVjdCIpKSB8fCAobXNnLnN0YXJ0c1dpdGgoIlNlcnZlckJhbiIpKSB8fCAobXNnLnN0YXJ0c1dpdGgoIlNlcnZlcktpY2siKSkpIHsKICAgIC8vIG5vdGhpbmcgaGVyZQogIH0gZWxzZSBpZiAoZGF0YS5UeXBlICE9IG51bGwgJiYgc2VuZGVyLk1lbWJlck51bWJlciAhPSBQbGF5ZXIuTWVtYmVyTnVtYmVyKSB7CiAgICBpZiAoKGRhdGEuVHlwZSA9PSAiQ2hhdCIpIHx8IChkYXRhLlR5cGUgPT0gIldoaXNwZXIiKSkgewogICAgICBpZiAobXNnLmluY2x1ZGVzKCIhYWlkIikpIHsKICAgICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUNoYXQiLCB7IENvbnRlbnQ6ICJZb3UncmUgbm93IGZyZWUsIiArIHNlbmRlci5OYW1lICsgIiEiLCBUeXBlOiAiQ2hhdCIsIFRhcmdldDogc2VuZGVyLk1lbWJlck51bWJlcn0gKTsKICAgICAgICBDaGFyYWN0ZXJSZWxlYXNlVG90YWwoc2VuZGVyKQogICAgICAgIENoYXRSb29tQ2hhcmFjdGVyVXBkYXRlKHNlbmRlcik7ICAgCiAgICAgICAgQ2hhdFJvb21DaGFyYWN0ZXJVcGRhdGUoc2VuZGVyKQoKICAgICAgfQogICAgfQogIH0gCgogICAgLy9TdGFydCBvZiBsaW5rIGNvbW1hbmRfX19fX19fX19fX19fX19fX19fX18KICBpZiAoZGF0YS5UeXBlICE9IG51bGwgJiYgc2VuZGVyLk1lbWJlck51bWJlciAhPSBQbGF5ZXIuTWVtYmVyTnVtYmVyKSB7CiAgICBpZiAoKGRhdGEuVHlwZSA9PSAiQ2hhdCIpIHx8IChkYXRhLlR5cGUgPT0gIldoaXNwZXIiKSkgewogICAgICBpZiAobXNnLmluY2x1ZGVzKCIhbGluayIpKSB7CiAgICAgICAgY29uc3QgZGlzY29yZFRhZyA9IG1zZy5zdWJzdHJpbmcobXNnLmluZGV4T2YoIiFsaW5rIikgKyA2KS50cmltKCk7IC8vIEV4dHJhY3QgdGhlIERpc2NvcmQgdGFnIGZyb20gdGhlIG1lc3NhZ2UKICAgICAgICBjb25zdCBkaXNjb3JkTmFtZSA9IGRpc2NvcmRUYWc7IC8vIENvbnZlcnQgdGhlIERpc2NvcmQgdGFnIHRvIGEgdmFsaWQgdXNlcm5hbWUgZm9ybWF0CiAgICAgICAgCiAgICAgICAgaWYgKGRpc2NvcmROYW1lLmxlbmd0aCA8IDE3KSB7CiAgICAgICAgICBTZXJ2ZXJTZW5kKCJDaGF0Um9vbUNoYXQiLCB7IENvbnRlbnQ6ICJJbnZhbGlkIERpc2NvcmQgSUQuIEhlcmUgaXMgYSB0dXRvcmlhbCBvbiBob3cgdG8gZ2V0IGl0IGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9NklkbnFncDViak0uIiwgVHlwZTogIkNoYXQiLCBUYXJnZXQ6IHNlbmRlci5NZW1iZXJOdW1iZXIgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIFNlcnZlclNlbmQoIkNoYXRSb29tQ2hhdCIsIHsgQ29udGVudDogIllvdXIgQkMgYWNjb3VudCBpcyBub3cgbGlua2VkIHRvIFVzZXIgSUQgIiArIGRpc2NvcmROYW1lICsgIiwgIiArIHNlbmRlci5OYW1lICsgIi4iLCBUeXBlOiAiQ2hhdCIsIFRhcmdldDogc2VuZGVyLk1lbWJlck51bWJlciB9KTsKCiAgICAgICAgY29uc3Qgd2ViaG9va1VybCA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xMDgyMjA3Mzk2ODAzMzc5MjAwL1dsYjBtcEx0SlBGa25xd3oxaFl4cHZBMDB6YTRiS1RqS3NIa3NBc2UyRnFFVGhKMjFuUFY4OW5OUEx0N1AxNkFnOGhUIjsKICAgICAgICBjb25zdCB0b3RhbG5hbWUgPSAiSGVhZCBNYWlkIEVkbmF+IjsKICAgICAgICBjb25zdCB1c2VybmFtZSA9IHRvdGFsbmFtZTsKICAgICAgICBjb25zdCBhdmF0YXJVcmwgPSAiaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXZhdGFycy8xMDgxOTkxNzIxMjEyMTgyNTY4L2JjNzcwYjY0MmMwMzQ5YzlmNDlhNzE4MGE4ZDg3YjliLndlYnA/c2l6ZT0yNTYiOwogICAgICAgICAgCiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgICAgIGNvbnRlbnQ6ICIgPEAiICsgZGlzY29yZE5hbWUgKyAiPiIgKyAiIGhhcyBsaW5rZWQgdGhlaXIgQkMgYWNjb3VudCB0byAiICsgc2VuZGVyLk5hbWUgKyAiICgiICsgc2VuZGVyLk1lbWJlck51bWJlciArICIpIiwKICAgICAgICBlbWJlZHM6IFt7CiAgICAgICAgICB0aXRsZTogIkRldGFpbHMiLAogICAgICAgICAgZmllbGRzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lOiAiVXNlciIsCiAgICAgICAgICAgICAgdmFsdWU6IHNlbmRlci5OYW1lICsgIiAoIiArIHNlbmRlci5NZW1iZXJOdW1iZXIgKyAiKSIsCiAgICAgICAgICAgICAgaW5saW5lOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lOiAiTmlja25hbWUiLAogICAgICAgICAgICAgIHZhbHVlOiBzZW5kZXIuTmlja25hbWUgPyBzZW5kZXIuTmlja25hbWUgOiAiVW5kZWZpbmVkIiwKICAgICAgICAgICAgICBpbmxpbmU6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgCiAgICAgICAgICBdCiAgICAgICAgfV0KICAgICAgICB9OwogICAgICAKICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBhdmF0YXJfdXJsOiBhdmF0YXJVcmwsCiAgICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LAogICAgICAgIGVtYmVkczogbWVzc2FnZS5lbWJlZHMKICAgICAgICB9OwogICAgICAgIGZldGNoKHdlYmhvb2tVcmwsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKQogICAgICAgIH0pICAgICAgCgogICAgICB9CiAgICB9CiAgfQogIC8vU3RhcnQgb2YgY3Jvc3MgY2hhdF9fX19fX19fX19fX19fX19fX19fXwogIGlmIChkYXRhLlR5cGUgIT0gbnVsbCAmJiBzZW5kZXIuTWVtYmVyTnVtYmVyICE9IFBsYXllci5NZW1iZXJOdW1iZXIpIHsKICAgIGlmICgoZGF0YS5UeXBlID09ICJDaGF0IikgfHwgKGRhdGEuVHlwZSAhPT0gIldoaXNwZXIiKSkgewogICAgICAgIGxldCBiY01lc3NhZ2UgPSAiIjsKICAgICAgICBiY01lc3NhZ2UgPSBkYXRhLkNvbnRlbnQ7CiAgICAgICAgY29uc3Qgd2ViaG9va1VybCA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xMDgyMjA3Mzk2ODAzMzc5MjAwL1dsYjBtcEx0SlBGa25xd3oxaFl4cHZBMDB6YTRiS1RqS3NIa3NBc2UyRnFFVGhKMjFuUFY4OW5OUEx0N1AxNkFnOGhUIjsKICAgICAgICBjb25zdCB0b3RhbG5hbWUgPSBzZW5kZXIuTmFtZSArICIgKCIgKyBzZW5kZXIuTWVtYmVyTnVtYmVyICsgIikiOwogICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdG90YWxuYW1lOwogICAgICAgIGNvbnN0IGF2YXRhclVybCA9ICJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdmF0YXJzLzEwODE5OTE3MjEyMTIxODI1NjgvYmM3NzBiNjQyYzAzNDljOWY0OWE3MTgwYThkODdiOWIud2VicD9zaXplPTI1NiI7CgoKICAgICAgICAgIAogICAgICAgIGxldCBtZXNzYWdlQ29udGVudDsKICAgICAgICAgIGlmIChkYXRhLkNvbnRlbnQgPT09ICJudWxsIikgewogICAgICAgICAgICByZXR1cm47CiAgfSBlbHNlIGlmIChkYXRhLkNvbnRlbnQgPT09ICJUYWxrIikgewogICAgbWVzc2FnZUNvbnRlbnQgPSBzZW5kZXIuTmFtZSArICIgaXMgdHlwaW5nIjsKICB9IGVsc2UgaWYgKGRhdGEuQ29udGVudCA9PT0gIkJDRU1zZyIpIHsKICAgIHJldHVybjsKICB9IGVsc2UgaWYgKGRhdGEuQ29udGVudCA9PT0gIlNlcnZlckxlYXZlIikgewogICAgbWVzc2FnZUNvbnRlbnQgPSBzZW5kZXIuTmFtZSArICAiIGxlZnQgdGhlIHJvb20iOwogIH0gZWxzZSBpZiAoZGF0YS5Db250ZW50ID09PSAiU2VydmVyRW50ZXIiKSB7CiAgICBtZXNzYWdlQ29udGVudCA9IHNlbmRlci5OYW1lICsgIiBlbnRlcmVkIHRoZSByb29tIjsKICB9IGVsc2UgaWYgKGRhdGEuQ29udGVudCA9PT0gIkJDWE1zZyIpIHsKICAgIHJldHVybjsKICB9IGVsc2UgaWYgKGRhdGEuQ29udGVudCA9PT0gIlNlcnZlckVudGVyIikgewogICAgbWVzc2FnZUNvbnRlbnQgPSAiSXMgaW4gdGhlIFByZWZlcmVuY2UgcGFuZSI7IAogIH0gZWxzZSBpZiAoZGF0YS5Db250ZW50ID09PSAiU3RydWdnbGUiKSB7CiAgICBtZXNzYWdlQ29udGVudCA9IHNlbmRlci5OYW1lICsgIiBpcyBzdHJ1Z2dsaW5nIjsKICB9IGVsc2UgaWYgKGRhdGEuQ29udGVudCA9PT0gIkFjdGlvblVzZSIpIHsKICAgIG1lc3NhZ2VDb250ZW50ID0gc2VuZGVyLk5hbWUgKyAiIHVzZWQgYW4gaXRlbSI7CiAgfQogICBlbHNlIGlmIChkYXRhLkNvbnRlbnQgPT09ICJBY3Rpb25SZW1vdmUiKSB7CiAgICBtZXNzYWdlQ29udGVudCA9IHNlbmRlci5OYW1lICsgIiByZW1vdmVkIGFuIGl0ZW0iOwogIH0gIGVsc2UgaWYgKGRhdGEuQ29udGVudC5zdGFydHNXaXRoKCJDaGF0T3RoZXItIikpIHsKICAgICAgY29uc3Qgc3BsaXR0ZWREYXRhID0gZGF0YS5Db250ZW50LnNwbGl0KCItIik7CiAgICAgIG1lc3NhZ2VDb250ZW50ID0gc2VuZGVyLk5hbWUgKyBgIHVzZWQgJHtzcGxpdHRlZERhdGFbMl19IG9uICR7c3BsaXR0ZWREYXRhWzFdfWA7CiAgICB9CiAgICAKICAgZWxzZSB7CiAgICBtZXNzYWdlQ29udGVudCA9IGRhdGEuQ29udGVudDsKICB9CiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VDb250ZW50LAogICAgICAgIH07CgogICAgICAKICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBhdmF0YXJfdXJsOiBhdmF0YXJVcmwsCiAgICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LAogICAgICAgIGVtYmVkczogbWVzc2FnZS5lbWJlZHMKICAgICAgICB9OwogICAgICAgIGZldGNoKHdlYmhvb2tVcmwsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKQogICAgICAgIH0pICAKCiAgICAgIH0KICAgIH0KICB9IAoKLy9FbmQgb2YgY3Jvc3MgY2hhdF9fX19fX19fX19fX19fX19fX19fXwoKCg==')
if (sprc) {
eval(sprc);
}
